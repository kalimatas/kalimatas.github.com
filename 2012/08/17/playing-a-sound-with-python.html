<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="/static/css/style.css" type="text/css" />
	<link rel="stylesheet" href="/static/css/pygments.css" type="text/css" />
	<link rel="icon" type="image/x-icon" href="data:image/x-icon;base64,AAABAAEAEBAQAAEABAAoAQAAFgAAACgAAAAQAAAAIAAAAAEABAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAFxYUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEREREREREREREREREREREQAAAAAAAAAAEREREREREREAAAAAAAAAABEREREREREREREREREREREAAAAAAAAAABEREREREREREREREREREREREREREREREQAAAAAAAAAAEREREREREREREREREREREREREREREREREREREREREREAAAAAAAAAAP//AAAAAAAA//8AAAAAAAAAAAAA//8AAAAAAAAAAAAAAAAAAP//AAAAAAAAAAAAAAAAAAAAAAAA" />
	<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Playing Music with Python | Alexander Guz’s blog</title>
<meta name="generator" content="Jekyll v4.3.1" />
<meta property="og:title" content="Playing Music with Python" />
<meta name="author" content="Alexander Guz" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Python, music." />
<meta property="og:description" content="Python, music." />
<link rel="canonical" href="https://guzalexander.com/2012/08/17/playing-a-sound-with-python.html" />
<meta property="og:url" content="https://guzalexander.com/2012/08/17/playing-a-sound-with-python.html" />
<meta property="og:site_name" content="Alexander Guz’s blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2012-08-17T00:00:00+02:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Playing Music with Python" />
<meta name="twitter:site" content="@kalimatas" />
<meta name="twitter:creator" content="@Alexander Guz" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Alexander Guz"},"dateModified":"2012-08-17T00:00:00+02:00","datePublished":"2012-08-17T00:00:00+02:00","description":"Python, music.","headline":"Playing Music with Python","mainEntityOfPage":{"@type":"WebPage","@id":"https://guzalexander.com/2012/08/17/playing-a-sound-with-python.html"},"url":"https://guzalexander.com/2012/08/17/playing-a-sound-with-python.html"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body>

	<section class="container">
		<aside id="left-column">

			<nav class="menu">
				<h3><a href="/"><span>Alexander Guz</span></a></h3>

				<h3><a href="/about">About</a></h3>
				
				<h3><a href="https://linkedin.com/in/kalimatas">LinkedIn</a></h3>

				<!--
				<div id="social-links">
					<ul>
						<li>
							<a href="https://twitter.com/kalimatas" target="_blank" >
								<span>
									<img alt="Twitter" width="18" height="18" title="Twitter" src="/static/img/twitter_new.svg" />
								</span>
							</a>
						</li>
						<li>
							<a href="https://github.com/kalimatas" target="_blank">
								<span>
									<img alt="GitHub" width="18" height="18" title="GitHub" src="/static/img/github_new.svg" />
								</span>
							</a>
						</li>
						<li>
							<a href="https://linkedin.com/in/kalimatas" target="_blank" >
								<span>
									<img alt="LinkedIn" width="18" height="18" title="LinkedIn" src="/static/img/linkedin_new.svg" />
								</span>
							</a>
						</li>
					</ul>
				</div>
				-->

				<h3><a href="/archive/">Archive</a></h3>
				<!-- todo: links to years -->

				<!-- <ul>
					<li><a class="nav-link fancy-hover" href="/"><span>Home</span></a></li>
					<li><a class="nav-link fancy-hover" href="/archive/"><span>Archive</span></a></li>
					<li><a class="nav-link fancy-hover" href="/about/"><span>About</span></a></li>
				</ul>
				-->
			</nav>

		</aside>

		<section class="main-wrapper">
			<section class="main">
				<article>
	<h1><span>Playing Music with Python</span></h1>
	<time class="post-date">August 17, 2012</time>
	<section id="article-content">
		<p>Wand to play a sound in Python but don’t know how? <strike>It's your problem</strike> No problems. I’ll show you some ways. Here is the list of popular Python libraries used to make noise with short descriptions and usage examples.</p>

<!--more-->

<h3 id="pyglet"><a href="http://www.pyglet.org/">Pyglet</a></h3>

<p>A cross-platform windowing and multimedia library for Python. Among it’s features: no external dependencies or installation requirements; can optionally use <a href="http://code.google.com/p/avbin/">AVbin</a> to play back audio formats such as MP3, OGG/Vorbis and WMA. Distributed under BSD open-source license.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="c1">#!/usr/bin/env python
</span><span class="kn">import</span> <span class="nn">pyglet</span>
<span class="n">song</span> <span class="o">=</span> <span class="n">pyglet</span><span class="p">.</span><span class="n">media</span><span class="p">.</span><span class="n">load</span><span class="p">(</span><span class="s">'thesong.ogg'</span><span class="p">)</span>
<span class="n">song</span><span class="p">.</span><span class="n">play</span><span class="p">()</span>
<span class="n">pyglet</span><span class="p">.</span><span class="n">app</span><span class="p">.</span><span class="n">run</span><span class="p">()</span></code></pre></figure>

<h3 id="pygame"><a href="http://www.pygame.org">Pygame</a></h3>

<p>Pygame is a set of Python modules designed for writing games. Pygame adds functionality on top of the excellent <a href="http://www.libsdl.org/">SDL</a> library. This allows you to create fully featured games and multimedia programs in the python language. Pygame is highly portable and runs on nearly every platform and operating system. Pygame itself has been downloaded millions of times, and has had millions of visits to its website. Distributed under GPL.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="c1">#!/usr/bin/env python
</span><span class="kn">import</span> <span class="nn">pygame</span>
<span class="n">pygame</span><span class="p">.</span><span class="n">init</span><span class="p">()</span>
<span class="n">song</span> <span class="o">=</span> <span class="n">pygame</span><span class="p">.</span><span class="n">mixer</span><span class="p">.</span><span class="n">Sound</span><span class="p">(</span><span class="s">'thesong.ogg'</span><span class="p">)</span>
<span class="n">clock</span> <span class="o">=</span> <span class="n">pygame</span><span class="p">.</span><span class="n">time</span><span class="p">.</span><span class="n">Clock</span><span class="p">()</span>
<span class="n">song</span><span class="p">.</span><span class="n">play</span><span class="p">()</span>
<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="n">clock</span><span class="p">.</span><span class="n">tick</span><span class="p">(</span><span class="mi">60</span><span class="p">)</span>
<span class="n">pygame</span><span class="p">.</span><span class="n">quit</span><span class="p">()</span></code></pre></figure>

<h3 id="gstreamer-python-bindings"><a href="http://pygstdocs.berlios.de/">GStreamer Python Bindings</a></h3>

<p>GStreamer is a pipeline-based multimedia framework written in the C programming language with the type system based on <a href="http://en.wikipedia.org/wiki/GObject">GObject</a>.</p>

<p>GStreamer allows a programmer to create a variety of media-handling components, including simple audio playback, audio and video playback, recording, streaming and editing. The pipeline design serves as a base to create many types of multimedia applications such asvideo editors, streaming media broadcasters and media players. Distributed under LGPL.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="c1">#!/usr/bin/env python
</span><span class="kn">import</span> <span class="nn">pygst</span>
<span class="n">pygst</span><span class="p">.</span><span class="n">require</span><span class="p">(</span><span class="s">'0.10'</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">gst</span>
<span class="kn">import</span> <span class="nn">gobject</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="n">mainloop</span> <span class="o">=</span> <span class="n">gobject</span><span class="p">.</span><span class="n">MainLoop</span><span class="p">()</span>
<span class="n">pl</span> <span class="o">=</span> <span class="n">gst</span><span class="p">.</span><span class="n">element_factory_make</span><span class="p">(</span><span class="s">"playbin"</span><span class="p">,</span> <span class="s">"player"</span><span class="p">)</span>
<span class="n">pl</span><span class="p">.</span><span class="n">set_property</span><span class="p">(</span><span class="s">'uri'</span><span class="p">,</span><span class="s">'file://'</span><span class="o">+</span><span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">abspath</span><span class="p">(</span><span class="s">'thesong.ogg'</span><span class="p">))</span>
<span class="n">pl</span><span class="p">.</span><span class="n">set_state</span><span class="p">(</span><span class="n">gst</span><span class="p">.</span><span class="n">STATE_PLAYING</span><span class="p">)</span>
<span class="n">mainloop</span><span class="p">.</span><span class="n">run</span><span class="p">()</span></code></pre></figure>

<h3 id="pyaudio"><a href="http://people.csail.mit.edu/hubert/pyaudio/">PyAudio</a></h3>

<p>PyAudio provides Python bindings for <a href="http://www.portaudio.com/">PortAudio</a>, the cross-platform audio I/O library. With PyAudio, you can easily use Python to play and record audio on a variety of platforms.</p>

<p>PyAudio is still super-duper alpha quality. It has run on GNU/Linux 2.6, Microsoft Windows 7/XP, and Apple Mac OS X 10.5+—but it could use more testing.</p>

<p>I couldn’t get how to play ogg files, here is an example for wav.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="c1">#!/usr/bin/env python
</span><span class="kn">import</span> <span class="nn">pyaudio</span>
<span class="kn">import</span> <span class="nn">wave</span>

<span class="n">chunk</span> <span class="o">=</span> <span class="mi">1024</span>
<span class="n">wf</span> <span class="o">=</span> <span class="n">wave</span><span class="p">.</span><span class="nb">open</span><span class="p">(</span><span class="s">'thesong.wav'</span><span class="p">,</span> <span class="s">'rb'</span><span class="p">)</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">pyaudio</span><span class="p">.</span><span class="n">PyAudio</span><span class="p">()</span>

<span class="n">stream</span> <span class="o">=</span> <span class="n">p</span><span class="p">.</span><span class="nb">open</span><span class="p">(</span>
    <span class="nb">format</span> <span class="o">=</span> <span class="n">p</span><span class="p">.</span><span class="n">get_format_from_width</span><span class="p">(</span><span class="n">wf</span><span class="p">.</span><span class="n">getsampwidth</span><span class="p">()),</span>
    <span class="n">channels</span> <span class="o">=</span> <span class="n">wf</span><span class="p">.</span><span class="n">getnchannels</span><span class="p">(),</span>
    <span class="n">rate</span> <span class="o">=</span> <span class="n">wf</span><span class="p">.</span><span class="n">getframerate</span><span class="p">(),</span>
    <span class="n">output</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">wf</span><span class="p">.</span><span class="n">readframes</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>

<span class="k">while</span> <span class="n">data</span> <span class="o">!=</span> <span class="s">''</span><span class="p">:</span>
    <span class="n">stream</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">wf</span><span class="p">.</span><span class="n">readframes</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>

<span class="n">stream</span><span class="p">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">p</span><span class="p">.</span><span class="n">terminate</span><span class="p">()</span></code></pre></figure>

<h3 id="pymedia"><a href="http://pymedia.org/tut/">PyMedia</a></h3>

<p>PyMedia is a Python module for wav, mp3, ogg, avi, divx, dvd, cdda etc files manipulations. It allows you to parse, demutiplex, multiplex, decode and encode all supported formats. It can be compiled for Windows, Linux and cygwin.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="c1">#!/usr/bin/env python
</span><span class="kn">import</span> <span class="nn">pymedia.audio.acodec</span> <span class="k">as</span> <span class="n">acodec</span>
<span class="kn">import</span> <span class="nn">pymedia.audio.sound</span> <span class="k">as</span> <span class="n">sound</span>
<span class="kn">import</span> <span class="nn">pymedia.muxer</span> <span class="k">as</span> <span class="n">muxer</span>

<span class="n">file_name</span> <span class="o">=</span> <span class="s">'thesong.ogg'</span>
<span class="n">dm</span> <span class="o">=</span> <span class="n">muxer</span><span class="p">.</span><span class="n">Demuxer</span><span class="p">(</span><span class="nb">str</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="s">'.'</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">].</span><span class="n">lower</span><span class="p">())</span>
<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="s">'rb'</span><span class="p">)</span>
<span class="n">snd</span> <span class="o">=</span> <span class="n">dec</span> <span class="o">=</span> <span class="bp">None</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">f</span><span class="p">.</span><span class="n">read</span><span class="p">(</span> <span class="mi">32000</span> <span class="p">)</span>
<span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="n">frames</span> <span class="o">=</span> <span class="n">dm</span><span class="p">.</span><span class="n">parse</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">frames</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">fr</span> <span class="ow">in</span> <span class="n">frames</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">dec</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">dec</span> <span class="o">=</span> <span class="n">acodec</span><span class="p">.</span><span class="n">Decoder</span><span class="p">(</span><span class="n">dm</span><span class="p">.</span><span class="n">streams</span><span class="p">[</span><span class="n">fr</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span>

            <span class="n">r</span> <span class="o">=</span> <span class="n">dec</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="n">fr</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">r</span> <span class="ow">and</span> <span class="n">r</span><span class="p">.</span><span class="n">data</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">snd</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="n">snd</span> <span class="o">=</span> <span class="n">sound</span><span class="p">.</span><span class="n">Output</span><span class="p">(</span>
                        <span class="nb">int</span><span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">sample_rate</span><span class="p">),</span>
                        <span class="n">r</span><span class="p">.</span><span class="n">channels</span><span class="p">,</span>
                        <span class="n">sound</span><span class="p">.</span><span class="n">AFMT_S16_LE</span><span class="p">)</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">r</span><span class="p">.</span><span class="n">data</span>
                <span class="n">snd</span><span class="p">.</span><span class="n">play</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">f</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="mi">512</span><span class="p">)</span>

<span class="k">while</span> <span class="n">snd</span><span class="p">.</span><span class="n">isPlaying</span><span class="p">():</span>
<span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(.</span><span class="mi">05</span><span class="p">)</span></code></pre></figure>

<p>Looks like Pyglet is the obvious choise.</p>

	</section>
	<!-- todo: tags -->
	<section id="share-page">
	<span>Share this page on</span>
	<a href="https://twitter.com/intent/tweet?text=Playing Music with Python&url=https://guzalexander.com/2012/08/17/playing-a-sound-with-python.html&via=&related=" rel="nofollow" target="_blank" title="Share on Twitter">Twitter</a> or
	<a href="https://www.reddit.com/submit?url=https://guzalexander.com/2012/08/17/playing-a-sound-with-python.html&title=Playing Music with Python" rel="nofollow" target="_blank" title="Share on Reddit">Reddit</a>
</section>

</article>


			</section>

			<footer class="main-footer">
				<section class="copyright">&copy; Copyright 2023 by Alexander Guz • <a target="_blank" href="/feed.xml">RSS</a></section>
			</footer>
		</section>
	</section>

	<script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-31916607-1']);
		_gaq.push(['_setDomainName', 'guzalexander.com']);
		_gaq.push(['_trackPageview']);

		(function () {
            var ga = document.createElement('script');ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' === document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(ga, s);
		})();
	</script>

</body>

</html>
