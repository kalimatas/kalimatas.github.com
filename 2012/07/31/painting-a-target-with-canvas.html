<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="/static/css/style.css" type="text/css" />
	<link rel="stylesheet" href="/static/css/pygments.css" type="text/css" />
	<link rel="icon" type="image/x-icon" href="data:image/x-icon;base64,AAABAAEAEBAQAAEABAAoAQAAFgAAACgAAAAQAAAAIAAAAAEABAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAFxYUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEREREREREREREREREREREQAAAAAAAAAAEREREREREREAAAAAAAAAABEREREREREREREREREREREAAAAAAAAAABEREREREREREREREREREREREREREREREQAAAAAAAAAAEREREREREREREREREREREREREREREREREREREREREREAAAAAAAAAAP//AAAAAAAA//8AAAAAAAAAAAAA//8AAAAAAAAAAAAAAAAAAP//AAAAAAAAAAAAAAAAAAAAAAAA" />
	<!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Painting a Target with Canvas | Alexander Guz’s blog</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Painting a Target with Canvas" />
<meta name="author" content="Alexander Guz" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="JavaScript canvas example." />
<meta property="og:description" content="JavaScript canvas example." />
<link rel="canonical" href="https://guzalexander.com/2012/07/31/painting-a-target-with-canvas.html" />
<meta property="og:url" content="https://guzalexander.com/2012/07/31/painting-a-target-with-canvas.html" />
<meta property="og:site_name" content="Alexander Guz’s blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2012-07-31T00:00:00+02:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Painting a Target with Canvas" />
<meta name="twitter:site" content="@kalimatas" />
<meta name="twitter:creator" content="@Alexander Guz" />
<script type="application/ld+json">
{"headline":"Painting a Target with Canvas","dateModified":"2012-07-31T00:00:00+02:00","url":"https://guzalexander.com/2012/07/31/painting-a-target-with-canvas.html","datePublished":"2012-07-31T00:00:00+02:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://guzalexander.com/2012/07/31/painting-a-target-with-canvas.html"},"author":{"@type":"Person","name":"Alexander Guz"},"description":"JavaScript canvas example.","@type":"BlogPosting","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body>

	<section class="container">
		<nav class="menu">
			<ul>
				<li><a class="nav-link fancy-hover" href="/"><span>Home</span></a></li>
				<li><a class="nav-link fancy-hover" href="/archive/"><span>Archive</span></a></li>
				<li><a class="nav-link fancy-hover" href="/about/"><span>About</span></a></li>
			</ul>
			<ul>
				<li>
					<a class="nav-link fancy-hover" href="https://twitter.com/kalimatas" target="_blank" >
						<span>
							<img alt="Twitter" width="18" height="18" title="Twitter" src="/static/img/twitter_new.svg" />
						</span>
					</a>
				</li>
				<li>
					<a class="nav-link fancy-hover" href="https://github.com/kalimatas" target="_blank">
						<span>
							<img alt="GitHub" width="18" height="18" title="GitHub" src="/static/img/github_new.svg" />
						</span>
					</a>
				</li>
				<li>
					<a class="nav-link fancy-hover" href="https://linkedin.com/in/kalimatas" target="_blank" >
						<span>
							<img alt="LinkedIn" width="18" height="18" title="LinkedIn" src="/static/img/linkedin_new.svg" />
						</span>
					</a>
				</li>
			</ul>
		</nav>

		<section class="main-wrapper">
			<section class="main">
				<article>
	
	<h1><span>Painting a Target with Canvas</span></h1>
	<section class="post-meta">
		
		<time>July 31, 2012</time> • <span class="reading-time" title="Estimated read time">
  
  
    4 mins read
  
</span>

	</section>
	<section id="article-content">
		<p>After playing with <a href="http://en.wikipedia.org/wiki/Canvas_element">canvas</a> for some time I gave a birth to this small piece of… code. If you don’t have any idea what it is I’ll give you a hint. It’s a gradually appearing target created with the help of HTML5 canvas element. 5 elements actually.</p>

<p>The idea is simple: create several canvas elements with different radius values and absolutely position them at the same point. Step by step drawing is archived by repeatedly calling a <em>drawCircle</em> function with different values of radius property until it reaches <code class="language-plaintext highlighter-rouge">Math.PI * 2</code>.</p>

<div style="position: relative;">
<div id="can_div" style="width: 300px; height: 300px;"></div>
</div>

<p>That’s it. View source for code.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="o">&lt;</span><span class="nx">script</span> <span class="nx">type</span><span class="o">=</span><span class="dl">"</span><span class="s2">text/javascript</span><span class="dl">"</span><span class="o">&gt;</span>
<span class="kd">var</span> <span class="nx">canvas</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">PI2</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">elements</span> <span class="o">=</span> <span class="p">[];</span>
<span class="kd">var</span> <span class="nx">colors</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">#C9F24B</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">#736859</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">#B8925A</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">#8C3F3F</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">#FFD63E</span><span class="dl">'</span><span class="p">];</span>
<span class="kd">var</span> <span class="nx">intervals</span> <span class="o">=</span> <span class="p">[];</span>
<span class="kd">var</span> <span class="nx">time</span> <span class="o">=</span> <span class="mi">15</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">createElements</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;=</span><span class="mi">4</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">elements</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="dl">'</span><span class="s1">radius</span><span class="dl">'</span><span class="p">:</span> <span class="p">(</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="mi">20</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">style</span><span class="dl">'</span><span class="p">:</span> <span class="nx">colors</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span>
            <span class="dl">'</span><span class="s1">size</span><span class="dl">'</span><span class="p">:</span> <span class="mi">300</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">circle</span><span class="dl">'</span><span class="p">:</span> <span class="kc">null</span>
        <span class="p">};</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">init</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">canvas</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">can_div</span><span class="dl">'</span><span class="p">);</span>
    <span class="nx">createElements</span><span class="p">();</span>

    <span class="nx">delta</span> <span class="o">=</span> <span class="mf">0.01</span><span class="p">;</span>
    <span class="nx">angle</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="nx">elements</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="nx">i</span><span class="o">&gt;=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">elem</span> <span class="o">=</span> <span class="nx">elements</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">circle</span> <span class="o">=</span> <span class="nx">createCircle</span><span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">size</span><span class="p">);</span>
        <span class="nx">intervals</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">createInterval</span><span class="p">(</span><span class="nx">elem</span><span class="p">,</span> <span class="nx">circle</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">createInterval</span><span class="p">(</span><span class="nx">elem</span><span class="p">,</span> <span class="nx">circle</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">setInterval</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    	<span class="nx">drawCircle</span><span class="p">(</span><span class="nx">circle</span><span class="p">,</span> <span class="mi">130</span><span class="p">,</span> <span class="mi">130</span><span class="p">,</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">radius</span><span class="p">,</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">);</span>
   	<span class="p">},</span> <span class="nx">time</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">createCircle</span><span class="p">(</span><span class="nx">size</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">circle</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">"</span><span class="s2">canvas</span><span class="dl">"</span><span class="p">);</span>
    <span class="nx">circle</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nx">size</span><span class="p">;</span>
    <span class="nx">circle</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">size</span><span class="p">;</span>
    <span class="nx">circle</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">position</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">absolute</span><span class="dl">'</span><span class="p">;</span>
    <span class="nx">circle</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">left</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">100px</span><span class="dl">"</span><span class="p">;</span>
    <span class="nx">circle</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">top</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="nx">canvas</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">circle</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">circle</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">drawCircle</span><span class="p">(</span> <span class="nx">can</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">radius</span><span class="p">,</span> <span class="nx">style</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">context</span> <span class="o">=</span> <span class="nx">can</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="dl">"</span><span class="s2">2d</span><span class="dl">"</span><span class="p">);</span>
    <span class="nx">context</span><span class="p">.</span><span class="nx">clearRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">600</span><span class="p">,</span> <span class="mi">600</span><span class="p">);</span>
    <span class="nx">context</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="nx">style</span><span class="p">;</span>
    <span class="nx">context</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span>
    <span class="nx">context</span><span class="p">.</span><span class="nx">arc</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">radius</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">angle</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
    <span class="nx">context</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span>
    <span class="nx">context</span><span class="p">.</span><span class="nx">closePath</span><span class="p">();</span>
    <span class="nx">context</span><span class="p">.</span><span class="nx">fill</span><span class="p">();</span>

    <span class="nx">angle</span> <span class="o">+=</span> <span class="nx">delta</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">angle</span> <span class="o">&gt;=</span> <span class="nx">PI2</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">intervals</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">clearInterval</span><span class="p">(</span><span class="nx">intervals</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nx">init</span><span class="p">();</span>
<span class="o">&lt;</span><span class="sr">/script&gt;</span></code></pre></figure>

<script type="text/javascript">
var canvas;
var PI2 = Math.PI * 2;
var elements = [];
var colors = ['#C9F24B', '#736859', '#B8925A', '#8C3F3F', '#FFD63E'];
var intervals = [];
var time = 15;

function createElements() {
    for (var i=0; i<=4; i++) {
        elements[i] = {
            'radius': (i+1) * 20,
            'style': colors[i],
            'size': 300,
            'circle': null
        };
    }
}

function init() {
    canvas = document.getElementById('can_div');
    createElements();

    delta = 0.01;
    angle = 0;
    for (var i=elements.length-1; i>=0; i--) {
        var elem = elements[i];
        var circle = createCircle(elem.size);
        intervals[i] = createInterval(elem, circle);
    }
}

function createInterval(elem, circle) {
    return setInterval(function () {
    	drawCircle(circle, 130, 130, elem.radius, elem.style);
    	}, time);
}

function createCircle(size) {
    var circle = document.createElement("canvas");
    circle.width = size;
    circle.height = size;
    circle.style.position = 'absolute';
    circle.style.left = "100px";
    circle.style.top = 0;
    canvas.appendChild(circle);
    return circle;
}

function drawCircle( can, x, y, radius, style) {
    var context = can.getContext("2d");
    context.clearRect(0, 0, 600, 600);
    context.fillStyle = style;
    context.beginPath();
    context.arc(x, y, radius, 0, angle, false);
    context.lineTo(x, y);
    context.closePath();
    context.fill();

    angle += delta;
    if (angle >= PI2 + 0.5) {
        for (var i=0; i<intervals.length; i++) {
            clearInterval(intervals[i]);
        }
    }
}

init();
</script>


	</section>
	<section id="share-page">
	<span>Share this page on</span>
	<a href="https://twitter.com/intent/tweet?text=Painting a Target with Canvas&url=https://guzalexander.com/2012/07/31/painting-a-target-with-canvas.html&via=&related=" rel="nofollow" target="_blank" title="Share on Twitter">Twitter</a> or
	<a href="https://www.reddit.com/submit?url=https://guzalexander.com/2012/07/31/painting-a-target-with-canvas.html&title=Painting a Target with Canvas" rel="nofollow" target="_blank" title="Share on Reddit">Reddit</a>
</section>

</article>


			</section>

			<footer class="main-footer">
				<section class="copyright">&copy; Copyright 2022 by Alexander Guz • <a target="_blank" href="/feed.xml">RSS</a></section>
			</footer>
		</section>
	</section>

	<script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-31916607-1']);
		_gaq.push(['_setDomainName', 'guzalexander.com']);
		_gaq.push(['_trackPageview']);

		(function () {
            var ga = document.createElement('script');ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' === document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(ga, s);
		})();
	</script>

</body>

</html>
